{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/editor.js","webpack:///./src/tokenizer.js","webpack:///./test/index.js"],"names":["Editor","element","config","_config","innerHTML","_onTip","onTip","_functions","_fields","_tokenizer","Tokenizer","_activeCaretRange","_pre","querySelector","_textarea","_caret","_showCaret","_initEvents","show","style","display","textarea","pre","onscroll","scrollTop","scrollLeft","_updateCaret","onblur","onfocus","_onkeyup","t","i","o","n","s","b","e","tip","_getParamDefinition","caretPos","type","validate","startsWith","value","substring","length","context","arguments","name","argumentIndex","several","_onkeydown","event","keyCode","preventDefault","document","execCommand","_onmousedown","setTimeout","_onpaste","text","clipboardData","getData","_oninput","_renderBackground","position","token","positions","getPositions","_validateToken","tokens","getTokens","j","index","tk","content","contentDocument","body","firstChild","innerText","execute","html","forEach","_formatToken","r","cls","functions","fields","getCursorPos","input","len","sel","range","createRange","parentElement","createTextRange","moveToBookmark","getBookmark","compareEndPoints","moveEnd","setEndPoint","start","end","selectionStart","selectionEnd","_text","_tokenIndex","_tokens","_tokensPos","ch","test","charCodeAt","isNaN","Number","context_vars","push","nextChar","isDigit","createToken","validateNumber","isLetter","charAnalize","isBlank","readNumber","isQuotes","readString","readFunction","readField","readContextVar","isOperator","readOperator","isArgumentSeparator","readArgumentSeparator","readArgumentStart","readArgumentEnd","readBlank","readOther","editor","getElementById","setFunctions","description","setFields"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;qjBClFA;;;AAGA;;;;;;;;IAEqBA,M;AACjB,oBAAYC,OAAZ,EAAiC;AAAA,YAAZC,MAAY,uEAAH,EAAG;;AAAA;;AAC7B,aAAKC,OAAL,CAAaD,MAAb;;AAEAD,gBAAQG,SAAR;;AAOA,aAAKC,MAAL,GAAcH,OAAOI,KAArB;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACA,aAAKC,OAAL,GAAe,EAAf;AACA,aAAKC,UAAL,GAAkB,IAAIC,mBAAJ,EAAlB;AACA,aAAKC,iBAAL,GAAyB,IAAzB;AACA,aAAKC,IAAL,GAAYX,QAAQY,aAAR,CAAsB,KAAtB,CAAZ;AACA,aAAKC,SAAL,GAAiBb,QAAQY,aAAR,CAAsB,UAAtB,CAAjB;AACA,aAAKE,MAAL,GAAcd,QAAQY,aAAR,CAAsB,QAAtB,CAAd;;AAEA,aAAKG,UAAL,CAAgB,KAAhB;AACA,aAAKC,WAAL;AACH;;;;gCAEOf,M,EAAO,CAEd;;;mCAEUgB,I,EAAK;AACZ,iBAAKH,MAAL,CAAYI,KAAZ,CAAkBC,OAAlB,GAA4BF,OAAO,OAAP,GAAiB,MAA7C;AACH;;;sCAEY;AAAA;;AACT,gBAAIG,WAAW,KAAKP,SAApB;AACA,gBAAIQ,MAAM,KAAKV,IAAf;;AAEAS,qBAASE,QAAT,GAAoB,YAAM;AACtBD,oBAAIE,SAAJ,GAAgBH,SAASG,SAAzB;AACAF,oBAAIG,UAAJ,GAAiBJ,SAASI,UAA1B;;AAEA,sBAAKC,YAAL;AACH,aALD;AAMAL,qBAASM,MAAT,GAAkB,YAAM;AACpB,sBAAKX,UAAL,CAAgB,KAAhB;AACH,aAFD;AAGAK,qBAASO,OAAT,GAAmB,YAAM;AACrB,sBAAKZ,UAAL,CAAgB,IAAhB;AACH,aAFD;AAGAK,qBAASQ,QAAT,GAAoB,YAAM;AACtB,oBAAIC,UAAJ;AAAA,oBAAOC,UAAP;AAAA,oBAAUC,UAAV;AAAA,oBAAaC,UAAb;AAAA,oBAAgBC,UAAhB;AAAA,oBAAmBC,UAAnB;AAAA,oBAAsBC,UAAtB;AACA,oBAAIC,MAAM,EAAV;;AAEA,sBAAKX,YAAL;;AAEAI,oBAAI,MAAKQ,mBAAL,CAAyB,MAAK3B,iBAAL,CAAuB4B,QAAvB,GAAkC,CAA3D,CAAJ;;AAEA,oBAAIT,CAAJ,EAAM;AACF,wBAAIA,EAAEU,IAAF,IAAQ,UAAR,IAAsB,CAACV,EAAEW,QAA7B,EAAsC;AAClC,6BAAKV,CAAL,IAAU,MAAKxB,UAAf,EAA0B;AACtB,gCAAIwB,EAAEW,UAAF,CAAaZ,EAAEa,KAAf,CAAJ,EAA0B;AACtBN,uDAAoBN,KAAGD,EAAEa,KAAL,GAAa,oBAAb,GAAoC,EAAxD,WAA+DZ,CAA/D;AACH;AACJ;AACJ,qBAND,MAMO,IAAID,EAAEU,IAAF,IAAQ,OAAR,IAAmB,CAACV,EAAEW,QAA1B,EAAmC;AACtC,6BAAKV,CAAL,IAAU,MAAKvB,OAAf,EAAuB;AACnByB,gCAAIF,EAAEa,SAAF,CAAY,CAAZ,EAAeb,EAAEc,MAAF,GAAW,CAA1B,CAAJ;AACA,gCAAId,EAAEW,UAAF,CAAaZ,EAAEa,KAAf,CAAJ,EAA0B;AACtBN,uDAAoBJ,KAAGH,EAAEa,KAAL,GAAa,oBAAb,GAAoC,EAAxD,WAA+DZ,CAA/D;AACH;AACJ;AACJ,qBAPM,MAOA,IAAID,EAAEgB,OAAN,EAAc;AACjBd,4BAAI,MAAKzB,UAAL,CAAgBuB,EAAEgB,OAAlB,CAAJ;AACA,4BAAId,CAAJ,EAAM;AACFK,kCAAMP,EAAEgB,OAAF,GAAY,GAAlB;AACAZ,gCAAI,EAAJ;;AAEA,gCAAIF,EAAEe,SAAN,EAAgB;AACZX,oCAAI,KAAJ;AACA,qCAAKL,IAAE,CAAP,EAAUA,IAAEC,EAAEe,SAAF,CAAYF,MAAxB,EAAgCd,GAAhC,EAAoC;AAChCE,wCAAID,EAAEe,SAAF,CAAYhB,CAAZ,EAAeiB,IAAnB;AACAb,wCAAKJ,KAAKD,EAAEmB,aAAZ;;AAEA,wCAAId,CAAJ,EAAM;AACFC,4CAAI,IAAJ;AACH;;AAEDC,2CAAOH,KAAMC,KAAMJ,KAAGC,EAAEe,SAAF,CAAYF,MAAZ,GAAmB,CAAtB,IAA2B,CAACT,CAA5B,IAAiCJ,EAAEe,SAAF,CAAYhB,CAAZ,EAAemB,OAAtD,sCAAkGjB,CAAlG,YAA4GA,CAAlH,CAAP;AACAC,wCAAI,IAAJ;AACH;;AAEDG,uCAAO,GAAP;AACH;AACJ;AAEJ;AACJ;;AAED,oBAAI,MAAKhC,MAAT,EAAgB;AACZ,0BAAKA,MAAL,CAAYgC,GAAZ;AACH;AACJ,aApDD;AAqDAhB,qBAAS8B,UAAT,GAAsB,UAACC,KAAD,EAAW;AAC7B,oBAAIA,MAAMC,OAAN,IAAiB,CAArB,EAAuB;AACnBD,0BAAME,cAAN;AACA,2BAAOC,SAASC,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0C,MAA1C,CAAP;AACH;;AAED,sBAAK9B,YAAL;AACH,aAPD;AAQAL,qBAASoC,YAAT,GAAwB,YAAM;AAC1BC,2BAAW,YAAM;AACb,0BAAKhC,YAAL;AACH,iBAFD,EAEG,GAFH;AAGH,aAJD;AAKAL,qBAASsC,QAAT,GAAoB,UAACP,KAAD,EAAW;AAC3B,oBAAIQ,OAAOR,MAAMS,aAAN,CAAoBC,OAApB,CAA4B,YAA5B,CAAX;;AAEAV,sBAAME,cAAN;AACAC,yBAASC,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0CI,IAA1C;AACH,aALD;AAMAvC,qBAAS0C,QAAT,GAAoB,YAAM;AACtB,sBAAKrC,YAAL;AACA,sBAAKsC,iBAAL;AACH,aAHD;AAIH;;;uCAEc;AACX;AACA;;AAEA;;AAEA;AACA;AACH;;;4CAEmBC,Q,EAAS;AACzB;AACA,gBAAIC,cAAJ;AACA,gBAAIC,YAAY,KAAK1D,UAAL,CAAgB2D,YAAhB,EAAhB;;AAEA,mBAAOH,YAAY,CAAnB,EAAqB;AACjBC,wBAAQC,UAAUF,QAAV,CAAR;;AAEA,oBAAIC,KAAJ,EAAU;AACN,yBAAKG,cAAL,CAAoBH,KAApB;AACA,2BAAOA,KAAP;AACH;;AAEDD;AACH;AACJ;;;uCAEcC,K,EAAM;AACjB,gBAAII,SAAS,KAAK7D,UAAL,CAAgB8D,SAAhB,EAAb;AACA,gBAAIC,IAAIN,MAAMO,KAAN,GAAc,CAAtB;AACA,gBAAI1C,UAAJ;AAAA,gBAAO2C,WAAP;;AAEAR,kBAAMzB,QAAN,GAAiB,KAAjB;;AAEA,gBAAIyB,MAAM1B,IAAN,IAAY,UAAhB,EAA2B;AACvB,qBAAKT,IAAEyC,CAAP,EAAUzC,IAAEuC,OAAOzB,MAAnB,EAA2Bd,GAA3B,EAA+B;AAC3B2C,yBAAKJ,OAAOvC,CAAP,CAAL;;AAEA,wBAAI2C,GAAG/B,KAAH,IAAY,GAAhB,EAAoB;AAChB,+BAAOuB,MAAMzB,QAAN,GAAiB,IAAxB;AACH,qBAFD,MAEO,IAAIiC,GAAGlC,IAAH,IAAW,OAAf,EAAuB;AAC1B,+BAAO0B,MAAMzB,QAAN,GAAiB,KAAxB;AACH;AACJ;AACJ,aAVD,MAUO,IAAIyB,MAAM1B,IAAN,IAAY,OAAhB,EAAwB;AAC3B0B,sBAAMzB,QAAN,GAAiB,KAAKjC,OAAL,CAAa0D,MAAMvB,KAAnB,IAA4B,IAA5B,GAAmC,KAApD;AACH;AACJ;;;4CAEkB;AAAA;;AACf,gBAAIgC,UAAU,KAAK7D,SAAL,CAAe8D,eAAf,CAA+BC,IAA/B,CAAoCC,UAApC,CAA+CC,SAA7D;AACA,gBAAIT,SAAS,KAAK7D,UAAL,CAAgBuE,OAAhB,CAAwBL,OAAxB,CAAb;AACA,gBAAIM,OAAO,EAAX;;AAEAX,mBAAOY,OAAP,CAAe,iBAAS;AACpB,oBAAIhB,MAAM1B,IAAN,IAAY,UAAhB,EAA2B;AACvB0B,0BAAMzB,QAAN,GAAiB,OAAKlC,UAAL,CAAgB2D,MAAMvB,KAAtB,IAA+B,IAA/B,GAAsC,KAAvD;AACH,iBAFD,MAEO,IAAIuB,MAAM1B,IAAN,IAAY,OAAhB,EAAwB;AAC3B0B,0BAAMzB,QAAN,GAAiB,OAAKjC,OAAL,CAAa0D,MAAMvB,KAAnB,IAA4B,IAA5B,GAAmC,KAApD;AACH;;AAEDsC,wBAAQ,OAAKE,YAAL,CAAkBjB,KAAlB,CAAR;AACH,aARD;;AAUA,iBAAKtD,IAAL,CAAUgE,eAAV,CAA0BC,IAA1B,CAA+BzE,SAA/B,GAA2C,UAAU6E,IAAV,GAAiB,QAA5D;AACH;;;qCAEYf,K,EAAM;AACf,gBAAIkB,IAAIlB,MAAMvB,KAAd;AACA,gBAAI0C,MAAMnB,MAAM1B,IAAN,IAAc0B,MAAMzB,QAAN,GAAiB,WAAjB,GAA+B,aAA7C,CAAV;;AAEA2C,kCAAoBC,GAApB,UAA4BD,CAA5B;;AAEA,mBAAOA,CAAP;AACH;;;qCAEYE,S,EAAU;AACnB,iBAAK/E,UAAL,GAAkB+E,SAAlB;AACH;;;kCAESC,M,EAAO;AACb,iBAAK/E,OAAL,GAAe+E,MAAf;AACH;;;;;;kBAhNgBvF,M;;;AAmNrB,SAASwF,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,QAAIC,YAAJ;AAAA,QAASC,YAAT;AAAA,QAAcpD,iBAAd;AAAA,QAAwBqD,cAAxB;;AAEAD,UAAMpC,SAAS,WAAT,EAAsBsC,WAAtB,EAAN;;AAEA,QAAIF,IAAIG,aAAJ,OAAwBL,KAA5B,EAAmC;AAC/BG,gBAAQH,MAAMM,eAAN,EAAR;AACAH,cAAMI,cAAN,CAAqBL,IAAIM,WAAJ,EAArB;AACA,aAAKP,MAAM,CAAX,EACYE,MAAMM,gBAAN,CAAuB,YAAvB,EAAqCN,KAArC,IAA8C,CAD1D,EAEYA,MAAMO,OAAN,CAAc,WAAd,EAA2B,CAAC,CAA5B,CAFZ,EAE4C;AACxCT;AACH;;AAEDE,cAAMQ,WAAN,CAAkB,cAAlB,EAAkCX,MAAMM,eAAN,EAAlC;;AAEA,aAAKxD,WAAW,EAAE8D,OAAO,CAAT,EAAYC,KAAKZ,GAAjB,EAAhB,EACYE,MAAMM,gBAAN,CAAuB,YAAvB,EAAqCN,KAArC,IAA8C,CAD1D,EAEYA,MAAMO,OAAN,CAAc,WAAd,EAA2B,CAAC,CAA5B,CAFZ,EAE4C;AACxC5D,qBAAS8D,KAAT;AACA9D,qBAAS+D,GAAT;AACH;;AAEDV,cAAMrD,QAAN,GAAiB;AACb8D,mBAAOZ,MAAMc,cADA;AAEbD,iBAAKb,MAAMe;AAFE,SAAjB;;AAKA,eAAOZ,KAAP;AACH;;AAGD,WAAO,IAAP;AACH,C;;;;;;;;;;;;;;;;;;;;;;ACzPD;;IAEqBlF,S;AACjB,yBAAa;AAAA;;AACT,aAAK+F,KAAL,GAAa,EAAb;AACA,aAAKC,WAAL,GAAmB,CAAnB;AACA,aAAKC,OAAL,GAAe,IAAf;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACH;;;;4CAEmBC,E,EAAI;AACpB,mBAAO,KAAIC,IAAJ,CAASD,EAAT;AAAP;AACH;;;gCAEOA,E,EAAI;AACR,mBAAO,MAAKC,IAAL,CAAUD,EAAV;AAAP;AACH;;;iCAEQA,E,EAAI;AACT,mBAAO,UAASC,IAAT,CAAcD,EAAd;AAAP;AACH;;;mCAEUA,E,EAAI;AACX,mBAAO,oBAAmBC,IAAnB,CAAwBD,EAAxB;AAAP;AACH;;;iCAEQA,E,EAAG;AACR,mBAAOA,MAAM,GAAb;AACH;;;gCAEOA,E,EAAG;AACP,mBAAQA,MAAI,GAAJ,IAAWA,MAAI,IAAf,IAAuBA,MAAI,IAA3B,IAAmCA,GAAGE,UAAH,CAAc,CAAd,KAAkB,GAA7D;AACH;;;uCAEcpE,K,EAAM;AACjB,mBAAO,CAACqE,MAAMC,OAAOtE,KAAP,CAAN,CAAR;AACH;;;2CAEkBK,I,EAAK;AACpB,gBAAIkE,eAAe;AACf,0BAAU;AADK,aAAnB;;AAIA,mBAAOA,aAAalE,IAAb,CAAP;AACH;;;mCAES;AACN,mBAAO,KAAKyD,KAAL,CAAW,KAAKC,WAAL,EAAX,CAAP;AACH;;;oCAEWzC,Q,EAASC,K,EAAM;AACvBA,kBAAMO,KAAN,GAAc,KAAKkC,OAAL,CAAa9D,MAA3B;;AAEA,iBAAK8D,OAAL,CAAaQ,IAAb,CAAkBjD,KAAlB;AACA,iBAAK0C,UAAL,CAAgB3C,QAAhB,IAA4BC,KAA5B;AACH;;;mCAEUpB,O,EAAS+D,E,EAAI5D,a,EAAc;AAClC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,mBAAOG,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxB,oBAAI,KAAKC,OAAL,CAAaR,EAAb,KAAoBA,MAAI,GAA5B,EAAiC;AAC7BlE,6BAASkE,EAAT;AACH,iBAFD,MAEO;AACH;AACH;AACJ;;AAED,iBAAKH,WAAL;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM,QAJiB;AAKvBC,0BAAU,KAAK8E,cAAL,CAAoB5E,KAApB;AALa,aAA3B;AAOH;;;mCAEUG,O,EAAS+D,E,EAAI5D,a,EAAc;AAClC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAIR,QAAQQ,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,mBAAOG,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxBzE,yBAASkE,EAAT;;AAEA,oBAAIR,SAAOQ,EAAX,EAAe;AACX;AACH;AACJ;;AAED,iBAAKS,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;AAMH;;;qCAEYM,O,EAAS+D,E,EAAI5D,a,EAAc;AACpC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA;AACA,mBAAOG,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxB,oBAAG,KAAKI,QAAL,CAAcX,EAAd,KAAqB,KAAKQ,OAAL,CAAaR,EAAb,CAAxB,EAA0C;AACtClE,6BAASkE,EAAT;AACH,iBAFD,MAEO;AACH;AACH;AACJ;;AAED,iBAAKH,WAAL;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;;AAOA,mBAAOqE,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxB,oBAAIP,MAAM,GAAV,EAAc;AACV,yBAAKY,WAAL,CAAiB9E,KAAjB,EAAwBkE,EAAxB,EAA4B,CAA5B;AACH,iBAFD,MAEO,IAAIA,MAAM,GAAV,EAAc;AACjB,yBAAKY,WAAL,CAAiB3E,OAAjB,EAA0B+D,EAA1B,EAA8B5D,aAA9B;AACA;AACH,iBAHM,MAGA;AACH,yBAAKwE,WAAL,CAAiB9E,KAAjB,EAAwBkE,EAAxB,EAA4B,CAA5B;AACH;AAEJ;AACJ;;;kCAES/D,O,EAAS+D,E,EAAI5D,a,EAAc;AACjC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,mBAAOG,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxBzE,yBAASkE,EAAT;;AAEA,oBAAGA,MAAM,GAAT,EAAc;AACV;AACH;AACJ;;AAED,iBAAKS,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;AAMH;;;uCAEcM,O,EAAS+D,E,EAAI5D,a,EAAc;AACtC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,mBAAOG,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxB,oBAAG,KAAKI,QAAL,CAAcX,EAAd,KAAqB,KAAKQ,OAAL,CAAaR,EAAb,CAAxB,EAA0C;AACtClE,6BAASkE,EAAT;AACH,iBAFD,MAEO;AACH;AACH;AACJ;;AAED,iBAAKH,WAAL;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;AAMH;;;qCAEYM,O,EAAS+D,E,EAAI5D,a,EAAc;AACpC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;AACA,gBAAIzE,IAAI,KAAKwE,KAAL,CAAW,KAAKC,WAAhB,CAAR;;AAEA,gBAAKzE,KAAK,GAAV,EAAc;AACV4E,sBAAM5E,CAAN;AACH;;AAED,iBAAKqF,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;AAMH;;;8CAEqBM,O,EAAS+D,E,EAAI5D,a,EAAc;AAC7C,gBAAIgB,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEAzD;;AAEA,iBAAKqE,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,uBAAOkE,EADgB;AAEvB/D,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;;AAOA,mBAAOqE,KAAK,KAAKO,QAAL,EAAZ,EAA4B;;AAExB,oBAAIP,MAAM,GAAV,EAAc;AACV,yBAAKH,WAAL;AACA;AACH;;AAED,qBAAKe,WAAL,CAAiB3E,OAAjB,EAA0B+D,EAA1B,EAA8B5D,aAA9B;AACH;AACJ;;;0CAEiBH,O,EAAS+D,E,EAAI5D,a,EAAc;AACzC,gBAAIgB,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,uBAAOkE,EADgB;AAEvB/D,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;;AAOA,mBAAO,gBAAP;AACH;;;wCAEeM,O,EAAS+D,E,EAAI5D,a,EAAc;AACvC,gBAAIgB,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,uBAAOkE,EADgB;AAEvB/D,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;;AAOA,mBAAO,cAAP;AACH;;;kCAESM,O,EAAS+D,E,EAAI5D,a,EAAc;AACjC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,mBAAOG,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxB,oBAAG,KAAKM,OAAL,CAAab,EAAb,CAAH,EAAqB;AACjBlE,6BAASkE,EAAT;AACH,iBAFD,MAEO;AACH;AACH;AACJ;;AAED,iBAAKH,WAAL;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;AAMH;;;kCAESM,O,EAAS+D,E,EAAI5D,a,EAAc;AACjC,gBAAIN,QAAQkE,EAAZ;AACA,gBAAI5C,WAAW,KAAKyC,WAAL,GAAmB,CAAlC;;AAEA,iBAAKY,WAAL,CAAiBrD,QAAjB,EAA2B;AACvBtB,4BADuB;AAEvBG,gCAFuB;AAGvBG,4CAHuB;AAIvBT,sBAAM;AAJiB,aAA3B;AAMH;;;oCAEWM,O,EAAS+D,E,EAAI5D,a,EAAc;AACnC;AACA,gBAAG,KAAKoE,OAAL,CAAaR,EAAb,CAAH,EAAqB;AACjB,qBAAKc,UAAL,CAAgB7E,OAAhB,EAAyB+D,EAAzB,EAA6B5D,aAA7B;AACH;;AAED;AAJA,iBAKK,IAAI,KAAK2E,QAAL,CAAcf,EAAd,CAAJ,EAAsB;AACvB,yBAAKgB,UAAL,CAAgB/E,OAAhB,EAAyB+D,EAAzB,EAA6B5D,aAA7B;AACH;;AAED;AAJK,qBAKA,IAAI,KAAKuE,QAAL,CAAcX,EAAd,CAAJ,EAAuB;AACxB,6BAAKiB,YAAL,CAAkBhF,OAAlB,EAA2B+D,EAA3B,EAA+B5D,aAA/B;AACH;;AAED;AAJK,yBAKA,IAAI4D,MAAI,GAAR,EAAa;AACd,iCAAKkB,SAAL,CAAejF,OAAf,EAAwB+D,EAAxB,EAA4B5D,aAA5B;AACH;;AAED;AAJK,6BAKA,IAAI4D,MAAI,GAAR,EAAa;AACd,qCAAKmB,cAAL,CAAoBlF,OAApB,EAA6B+D,EAA7B,EAAiC5D,aAAjC;AACH;;AAED;AAJK,iCAKA,IAAI,KAAKgF,UAAL,CAAgBpB,EAAhB,CAAJ,EAAwB;AACzB,yCAAKqB,YAAL,CAAkBpF,OAAlB,EAA2B+D,EAA3B,EAA+B5D,aAA/B;AACH;;AAED;AAJK,qCAKA,IAAI,KAAKkF,mBAAL,CAAyBtB,EAAzB,CAAJ,EAAiC;AAClC,6CAAKuB,qBAAL,CAA2BtF,OAA3B,EAAoC+D,EAApC,EAAwC5D,aAAxC;AACH;;AAED;AAJK,yCAKA,IAAI4D,MAAM,GAAV,EAAc;AACf,mDAAO,KAAKwB,iBAAL,CAAuBvF,OAAvB,EAAgC+D,EAAhC,EAAoC5D,aAApC,CAAP;AACH;;AAED;AAJK,6CAKA,IAAI4D,MAAM,GAAV,EAAc;AACf,uDAAO,KAAKyB,eAAL,CAAqBxF,OAArB,EAA8B+D,EAA9B,EAAkC5D,aAAlC,CAAP;AACH,6CAFI,MAIA,IAAI,KAAKyE,OAAL,CAAab,EAAb,CAAJ,EAAqB;AACtB,qDAAK0B,SAAL,CAAezF,OAAf,EAAwB+D,EAAxB,EAA4B5D,aAA5B;AACH,6CAFI,MAIA;AACD,qDAAKuF,SAAL,CAAe1F,OAAf,EAAwB+D,EAAxB,EAA4B5D,aAA5B;AACH;AACJ;;;gCAEOW,I,EAAK;AACT,gBAAIiD,WAAJ;;AAEA,iBAAKJ,KAAL,GAAa7C,IAAb;AACA,iBAAK+C,OAAL,GAAe,EAAf;AACA,iBAAKD,WAAL,GAAmB,CAAnB;AACA,iBAAKE,UAAL,GAAkB,EAAlB;;AAEA,mBAAOC,KAAK,KAAKO,QAAL,EAAZ,EAA4B;AACxB,qBAAKK,WAAL,CAAiB,IAAjB,EAAuBZ,EAAvB,EAA2B,CAA3B;AACH;;AAED,mBAAO,KAAKF,OAAZ;AAEH;;;uCAEa;AACV,mBAAO,KAAKC,UAAZ;AACH;;;oCAEU;AACP,mBAAO,KAAKD,OAAZ;AACH;;;;;;kBAjWgBjG,S;;;;;;;;;;;;;;ACArB;;;;;;AAEA,IAAI+H,SAAS,IAAIzI,gBAAJ,CAAWuD,SAASmF,cAAT,CAAwB,QAAxB,CAAX,EAA8C;AACvDpI,SADuD,iBACjD+B,GADiD,EAC7C;AACNkB,iBAASmF,cAAT,CAAwB,KAAxB,EAA+BtI,SAA/B,GAA2CiC,GAA3C;AACH;AAHsD,CAA9C,CAAb,C,CAJA;;AAUAoG,OAAOE,YAAP,CAAoB;AAChB,WAAO;AACH5F,mBAAW,CACP;AACIC,kBAAM,OADV;AAEIR,kBAAM,MAFV;AAGIoG,yBAAa;AAHjB,SADO,EAMP;AACI5F,kBAAM,KADV;AAEIR,kBAAM,MAFV;AAGIoG,yBAAa;AAHjB,SANO;AADR,KADS;AAehB,aAAS;AACL7F,mBAAW,CACP;AACIC,kBAAM,OADV;AAEIR,kBAAM,OAFV;AAGIoG,yBAAa;AAHjB,SADO;AADN,KAfO;AAwBhB,cAAU;AACN7F,mBAAW,CACP;AACIC,kBAAM,QADV;AAEIR,kBAAM,OAFV;AAGIoG,yBAAa;AAHjB,SADO,EAMP;AACI5F,kBAAM,QADV;AAEIR,kBAAM,OAFV;AAGIoG,yBAAa;AAHjB,SANO,EAWP;AACI5F,kBAAM,gBADV;AAEIR,kBAAM,OAFV;AAGIU,qBAAS,IAHb;AAII0F,yBAAa;AAJjB,SAXO;AADL,KAxBM;AA4ChB,UAAM;AACF7F,mBAAW,CACP;AACIC,kBAAM,WADV;AAEIR,kBAAM,SAFV;AAGIoG,yBAAa;AAHjB,SADO,EAMP;AACI5F,kBAAM,aADV;AAEIR,kBAAM,OAFV;AAGIoG,yBAAa;AAHjB,SANO,EAWP;AACI5F,kBAAM,cADV;AAEIR,kBAAM,OAFV;AAGIoG,yBAAa;AAHjB,SAXO;AADT,KA5CU;AA+DhB,cAAU;AA/DM,CAApB;;AAkEAH,OAAOI,SAAP,CAAiB;AACb,WAAM,CADO;AAEb,YAAO;AAFM,CAAjB,E","file":"test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./test/index.js\");\n","// @ts-check\n\n\nimport Tokenizer from './tokenizer'\n\nexport default class Editor{\n    constructor(element, config = {}){\n        this._config(config)\n\n        element.innerHTML = \n            `<div class=\"formula-editor\" style=\"position:relative;width:100%;height:100%\">\n                <pre class=\"formula-editor-pre\"></pre>\n                <textarea class=\"formula-editor-textarea\" spellcheck=\"false\"></textarea>\n                <div class=\"caret\" style=\"left:6px;top:4px\"></div>\n            </div>`\n\n        this._onTip = config.onTip\n        this._functions = {}\n        this._fields = {}\n        this._tokenizer = new Tokenizer()\n        this._activeCaretRange = null\n        this._pre = element.querySelector('pre')\n        this._textarea = element.querySelector('textarea')\n        this._caret = element.querySelector('.caret')\n        \n        this._showCaret(false)\n        this._initEvents()\n    }\n\n    _config(config){\n        \n    }\n\n    _showCaret(show){\n        this._caret.style.display = show ? 'block' : 'none'\n    }\n\n    _initEvents(){\n        let textarea = this._textarea\n        let pre = this._pre\n\n        textarea.onscroll = () => {\n            pre.scrollTop = textarea.scrollTop\n            pre.scrollLeft = textarea.scrollLeft\n\n            this._updateCaret()\n        }\n        textarea.onblur = () => {\n            this._showCaret(false)\n        }\n        textarea.onfocus = () => {\n            this._showCaret(true)\n        }\n        textarea._onkeyup = () => {\n            let t, i, o, n, s, b, e\n            let tip = ''\n    \n            this._updateCaret()\n    \n            t = this._getParamDefinition(this._activeCaretRange.caretPos - 1)\n            \n            if (t){\n                if (t.type=='function' && !t.validate){\n                    for (i in this._functions){\n                        if (i.startsWith(t.value)){\n                            tip += `<p style=\"${i==t.value ? 'background:#00BCD4' : ''}\">${i}</p>`\n                        }\n                    }\n                } else if (t.type=='field' && !t.validate){\n                    for (i in this._fields){\n                        n = i.substring(0, i.length - 1)\n                        if (i.startsWith(t.value)){\n                            tip += `<p style=\"${n==t.value ? 'background:#00BCD4' : ''}\">${i}</p>`\n                        }\n                    }\n                } else if (t.context){\n                    o = this._functions[t.context]\n                    if (o){\n                        tip = t.context + '('\n                        s = ''\n                        \n                        if (o.arguments){\n                            e = false\n                            for (i=0; i<o.arguments.length; i++){\n                                n = o.arguments[i].name\n                                b = (i == t.argumentIndex)\n                                \n                                if (b){\n                                    e = true\n                                }\n                                \n                                tip += s + ( b || (i==o.arguments.length-1 && !e && o.arguments[i].several) ? `<b style=\"background:#f3dd9b\">${n}</b>` : n)\n                                s = '; '\n                            }\n\n                            tip += ')'\n                        }\n                    }\n                    \n                }\n            }\n    \n            if (this._onTip){\n                this._onTip(tip)\n            }\n        }\n        textarea._onkeydown = (event) => {\n            if (event.keyCode == 9){\n                event.preventDefault()\n                return document.execCommand('insertText', false, '    ')\n            }\n            \n            this._updateCaret()\n        }\n        textarea._onmousedown = () => {\n            setTimeout(() => {\n                this._updateCaret()\n            }, 100)\n        }\n        textarea._onpaste = (event) => {\n            let text = event.clipboardData.getData(\"text/plain\")\n    \n            event.preventDefault()\n            document.execCommand('insertText', false, text)\n        }    \n        textarea._oninput = () => {\n            this._updateCaret()\n            this._renderBackground()\n        }\n    }\n\n    _updateCaret() {\n        // let rect\n        // let range = getCursorPos(this._textarea)\n        \n        // rect = range.getBoundingClientRect()\n        \n        // this._caret.style.top = (rect.y-2) + 'px'\n        // this._caret.style.left = rect.x + 'px'\n    }\n\n    _getParamDefinition(position){\n        /** @type {*} */\n        let token\n        let positions = this._tokenizer.getPositions()\n    \n        while (position >= 0){\n            token = positions[position]\n            \n            if (token){\n                this._validateToken(token)\n                return token\n            }\n    \n            position--\n        }\n    }\n\n    _validateToken(token){\n        let tokens = this._tokenizer.getTokens()\n        let j = token.index + 1\n        let i, tk\n\n        token.validate = false\n\n        if (token.type=='function'){\n            for (i=j; i<tokens.length; i++){\n                tk = tokens[i]\n                \n                if (tk.value == '('){\n                    return token.validate = true\n                } else if (tk.type != 'blank'){\n                    return token.validate = false\n                }\n            }\n        } else if (token.type=='field'){\n            token.validate = this._fields[token.value] ? true : false\n        }\n    }\n\n    _renderBackground(){\n        let content = this._textarea.contentDocument.body.firstChild.innerText\n        let tokens = this._tokenizer.execute(content)\n        let html = ''\n    \n        tokens.forEach(token => {\n            if (token.type=='function'){\n                token.validate = this._functions[token.value] ? true : false\n            } else if (token.type=='field'){\n                token.validate = this._fields[token.value] ? true : false\n            }\n\n            html += this._formatToken(token)\n        })\n    \n        this._pre.contentDocument.body.innerHTML = '<pre>' + html + '</pre>'\n    }\n\n    _formatToken(token){\n        let r = token.value\n        let cls = token.type + (token.validate ? ' validate' : ' unvalidate')\n    \n        r = `<span class=\"${cls}\">${r}</span>`\n    \n        return r\n    }\n\n    setFunctions(functions){\n        this._functions = functions\n    }\n\n    setFields(fields){\n        this._fields = fields\n    }\n}\n\nfunction getCursorPos(input) {\n    let len, sel, caretPos, range\n\n    sel = document['selection'].createRange();\n    \n    if (sel.parentElement() === input) {\n        range = input.createTextRange();\n        range.moveToBookmark(sel.getBookmark());\n        for (len = 0;\n                    range.compareEndPoints(\"EndToStart\", range) > 0;\n                    range.moveEnd(\"character\", -1)) {\n            len++;\n        }\n\n        range.setEndPoint(\"StartToStart\", input.createTextRange());\n        \n        for (caretPos = { start: 0, end: len };\n                    range.compareEndPoints(\"EndToStart\", range) > 0;\n                    range.moveEnd(\"character\", -1)) {\n            caretPos.start++;\n            caretPos.end++;\n        }\n        \n        range.caretPos = {\n            start: input.selectionStart,\n            end: input.selectionEnd\n        }\n\n        return range\n    }\n\n\n    return null;\n}","// @ts-check\n\nexport default class Tokenizer{\n    constructor(){\n        this._text = ''\n        this._tokenIndex = 0\n        this._tokens = null\n        this._tokensPos = {}\n    }\n\n    isArgumentSeparator(ch) {\n        return /;/.test(ch);\n    }\n    \n    isDigit(ch) {\n        return /\\d/.test(ch);\n    }\n    \n    isLetter(ch) {\n        return /[a-z]/i.test(ch);\n    }\n    \n    isOperator(ch) {\n        return /\\=|\\+|-|\\*|\\/|\\^/.test(ch);\n    }\n    \n    isQuotes(ch){\n        return ch == '\"'\n    }\n\n    isBlank(ch){\n        return (ch==' ' || ch=='\\t' || ch=='\\n' || ch.charCodeAt(0)==160)\n    }\n\n    validateNumber(value){\n        return !isNaN(Number(value))\n    }\n\n    validateContextVar(name){\n        let context_vars = {\n            '$INDEX': true\n        }\n    \n        return context_vars[name]\n    }\n\n    nextChar(){\n        return this._text[this._tokenIndex++]\n    }\n\n    createToken(position,token){\n        token.index = this._tokens.length\n        \n        this._tokens.push(token)\n        this._tokensPos[position] = token\n    }\n\n    readNumber(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n    \n        while (ch = this.nextChar()){\n            if (this.isDigit(ch) || ch==\".\") {\n                value += ch\n            } else {\n                break\n            }\n        }\n    \n        this._tokenIndex--\n\n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'number',\n            validate: this.validateNumber(value)\n        })\n    }\n\n    readString(context, ch, argumentIndex){\n        let value = ch\n        let start = ch\n        let position = this._tokenIndex - 1\n    \n        while (ch = this.nextChar()){\n            value += ch\n            \n            if (start==ch) {\n                break\n            }\n        }\n        \n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'string'\n        })\n    }\n\n    readFunction(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n        \n        // nome da função\n        while (ch = this.nextChar()){\n            if(this.isLetter(ch) || this.isDigit(ch)) {\n                value += ch\n            } else {\n                break\n            }\n        }\n    \n        this._tokenIndex--\n\n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'function'\n        })\n\n        while (ch = this.nextChar()){\n            if (ch == '('){\n                this.charAnalize(value, ch, 0)\n            } else if (ch == ')'){\n                this.charAnalize(context, ch, argumentIndex)\n                break\n            } else {\n                this.charAnalize(value, ch, 0)\n            }\n\n        }\n    }\n\n    readField(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n\n        while (ch = this.nextChar()){\n            value += ch\n\n            if(ch == '}') {\n                break\n            }\n        }\n\n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'field'\n        })\n    }\n\n    readContextVar(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n    \n        while (ch = this.nextChar()){\n            if(this.isLetter(ch) || this.isDigit(ch)) {\n                value += ch\n            } else {\n                break\n            }\n        }\n    \n        this._tokenIndex--\n        \n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'context_var'\n        })\n    }\n\n    readOperator(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n        let n = this._text[this._tokenIndex]\n\n        if ( n == '='){\n            ch += n \n        }\n\n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'operator'\n        })\n    }\n\n    readArgumentSeparator(context, ch, argumentIndex){\n        let position = this._tokenIndex - 1\n\n        argumentIndex++\n\n        this.createToken(position, {\n            value: ch,\n            context,\n            argumentIndex,\n            type: 'argument-separator'\n        })\n\n        while (ch = this.nextChar()){\n            \n            if (ch == ')'){\n                this._tokenIndex--\n                return\n            }\n            \n            this.charAnalize(context, ch, argumentIndex)\n        }\n    }\n\n    readArgumentStart(context, ch, argumentIndex){\n        let position = this._tokenIndex - 1\n            \n        this.createToken(position, {\n            value: ch,\n            context,\n            argumentIndex,\n            type: 'argument-start'\n        })\n\n        return 'argument-start'\n    }\n\n    readArgumentEnd(context, ch, argumentIndex){\n        let position = this._tokenIndex - 1\n            \n        this.createToken(position, {\n            value: ch,\n            context,\n            argumentIndex,\n            type: 'argument-end'\n        })\n\n        return 'argument-end'\n    }\n\n    readBlank(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n        \n        while (ch = this.nextChar()){\n            if(this.isBlank(ch)) {\n                value += ch\n            } else {\n                break\n            }\n        }\n        \n        this._tokenIndex--\n\n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'blank'\n        })\n    }\n\n    readOther(context, ch, argumentIndex){\n        let value = ch\n        let position = this._tokenIndex - 1\n        \n        this.createToken(position, {\n            value,\n            context,\n            argumentIndex,\n            type: 'other'\n        })\n    }\n\n    charAnalize(context, ch, argumentIndex){\n        // number      \n        if(this.isDigit(ch)) {\n            this.readNumber(context, ch, argumentIndex)\n        }\n        \n        // string\n        else if (this.isQuotes(ch)){\n            this.readString(context, ch, argumentIndex)\n        }\n\n        // função\n        else if (this.isLetter(ch)) {\n            this.readFunction(context, ch, argumentIndex)\n        }\n\n        // campo\n        else if (ch=='{') {\n            this.readField(context, ch, argumentIndex)\n        }\n\n        // variável de contexto\n        else if (ch=='$') {\n            this.readContextVar(context, ch, argumentIndex)\n        }\n        \n        // operador\n        else if (this.isOperator(ch)){\n            this.readOperator(context, ch, argumentIndex)\n        }\n\n        // separado de argumentos de função\n        else if (this.isArgumentSeparator(ch)){\n            this.readArgumentSeparator(context, ch, argumentIndex)\n        }\n        \n        // início de argumentos de função\n        else if (ch == '('){\n            return this.readArgumentStart(context, ch, argumentIndex)\n        }\n\n        // fim de argumentos de função\n        else if (ch == ')'){\n            return this.readArgumentEnd(context, ch, argumentIndex)\n        }\n\n        else if (this.isBlank(ch)){\n            this.readBlank(context, ch, argumentIndex)\n        }\n\n        else {\n            this.readOther(context, ch, argumentIndex)\n        }\n    }\n\n    execute(text){\n        let ch\n\n        this._text = text\n        this._tokens = []\n        this._tokenIndex = 0\n        this._tokensPos = {}\n\n        while (ch = this.nextChar()){\n            this.charAnalize(null, ch, 0)\n        }\n\n        return this._tokens;\n\n    }\n\n    getPositions(){\n        return this._tokensPos\n    }\n\n    getTokens(){\n        return this._tokens\n    }\n}\n\n\n\n","// @ts-check\n\nimport Editor from '../src/editor'\n\nlet editor = new Editor(document.getElementById('editor'), {\n    onTip(tip){\n        document.getElementById('tip').innerHTML = tip\n    }\n})\n\neditor.setFunctions({\n    'sum': {\n        arguments: [\n            {\n                name: 'start', \n                type: 'text',\n                description: 'a primeira {context} do intervalo de soma'\n            },\n            {\n                name: 'end', \n                type: 'text',\n                description: 'a última {context} do intervalo de soma'\n            }\n        ]\n    },\n    'value': {\n        arguments: [\n            {\n                name: 'field', \n                type: 'field',\n                description: 'campo a definir o valor'\n            }\n        ]\n    },\n    'values': {\n        arguments: [\n            {\n                name: 'field1', \n                type: 'field',\n                description: 'campo a definir o valor'\n            },\n            {\n                name: 'field2', \n                type: 'field',\n                description: 'campo a definir o valor'\n            },\n            {\n                name: '[optional ...]', \n                type: 'field',\n                several: true,\n                description: 'campo a definir o valor'\n            }\n        ]\n    },\n    'if': {\n        arguments: [\n            {\n                name: 'condition', \n                type: 'boolean',\n                description: 'expressão a ser avaliada'\n            },\n            {\n                name: 'valueIfTrue', \n                type: 'field',\n                description: 'campo a definir o valor'\n            },\n            {\n                name: 'valueIfFalse', \n                type: 'field',\n                description: 'campo a definir o valor'\n            }\n        ]\n    },\n    'valuex': true\n})\n\neditor.setFields({\n    '{a}':1,\n    '{bb}':1\n})\n"],"sourceRoot":""}